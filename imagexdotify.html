<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dotify - Image Dotifyer Vice Versa</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://rawcdn.githack.com/nader-mk/dotify-cdn/6e232817420162309d27ffc2fa6e97e740518612/dotify.js"></script>
  <style>
    .image-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 2rem;
    }

    .output-image {
      margin-top: 2rem;
      max-width: 100%;
      height: auto;
    }
    
    //new
    .range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 4px;
  background-color: #e5e7eb;
  outline: none;
  opacity: 0.7;
  -webkit-transition: opacity 0.2s;
  transition: opacity 0.2s;
}

.range-slider:hover {
  opacity: 1;
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background-color: #4f46e5;
  border-radius: 50%;
  cursor: pointer;
}

.range-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background-color: #4f46e5;
  border-radius: 50%;
  cursor: pointer;
}

    //old
  </style>
</head>

<body class="bg-gray-100">
  <div class="container mx-auto p-4">
    
<h1 class="flex items-center text-5xl font-extrabold dark:text-white">Dotify<span class="bg-blue-100 text-blue-800 text-2xl font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 ml-2">FREE</span></h1>

    <h2 class="text-2xl text-gray-700 mb-8">Image to Dotifyer Web Version Test</h2>

    <!-- Image to Base64 Conversion -->
    <div>
      <h3 class="text-2xl font-bold mb-2">Convert Image to Dotify</h3>
      <div class="flex mt-4">
        <input type="file" id="imageInput" accept="image/*" class="hidden">
        <label for="imageInput" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-lg cursor-pointer">Choose Image</label>
        
        <span id="selectedImage" class="ml-2"></span>
      </div>
      <div class="mt-4">
  <label for="range" class="block text-2xl font-bold text-gray-700">Quality</label>
  <div class="mt-1">
  <label for="range"></label>
<input type="range" name="range" id="range" class="range-slider w-full" min="0.1" max="1.0" step="0.1" value="0.1"><div id="wrn" class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
  <p class="font-bold">Warning</p>
  <p>
<label id="reduction-label"></label></p>
</div>

  </div>
</div>
<br>
<button type="button" id="convertToBase64Btn" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
    Dotify now
    <svg aria-hidden="true" class="w-5 h-5 ml-2 -mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
</button>

     <!-- <button id="convertToBase64Btn" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">Convert</button>
      ---->
      
      <div id="base64Output" class="mt-4"></div>
    </div>

    <!-- Base64 to Image Conversion -->
    <div class="mt-8">
      <h3 class="text-2xl font-bold mb-2">Convert Dotify to Image</h3>
      
      <textarea id="base64Input" class="w-full p-2 mb-2" rows="4" placeholder="Paste Dotify Notation"></textarea>
      <button id="convertToImageBtn" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">Convert to image</button>
      <button id="cpyBtn" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">Copy</button>
      
      
 
        

<br>
<!-----new----->

<div id="naderPr" class="w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
 
  <div class="flex flex-col items-center pb-10">
<div id='imageContainer' class="w-auto h-auto">
</div>

    <h5 id="dt" class="mb-1 text-xl font-medium text-gray-900 dark:text-white"></h5>
   
    <div class="flex mt-4 space-x-3 md:mt-6">
      <a href="" id="d64" class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Download</a>
      <a href="" onclick="saveTextAsFile()" class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700">Save as .dotify</a>
       
    </div>
    </div>
    </div>
            <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
    <svg class="w-10 h-10 mb-2 text-gray-500 dark:text-gray-400" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5 5a3 3 0 015-2.236A3 3 0 0114.83 6H16a2 2 0 110 4h-5V9a1 1 0 10-2 0v1H4a2 2 0 110-4h1.17C5.06 5.687 5 5.35 5 5zm4 1V5a1 1 0 10-1 1h1zm3 0a1 1 0 10-1-1v1h1z" clip-rule="evenodd"></path><path d="M9 11H3v5a2 2 0 002 2h4v-7zM11 18h4a2 2 0 002-2v-5h-6v7z"></path></svg>
    <a href="#">
        <h5 class="mb-2 text-2xl font-semibold tracking-tight text-gray-900 dark:text-white">Thanks for Dotify!</h5>
    </a>
    <p class="mb-3 font-normal text-gray-500 dark:text-gray-400">If you found Dotify useful, show some appreciation to the developer and support the tool's future development.</p>
    <a href="https://twitter.com/nadermkhanbd" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-blue-600 hover:underline">
        Tweet your appreciation 
      <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path><path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"></path></svg>
    </a>
</div>

  </div>
</div>


      </div>
      
<footer class="bg-white rounded-lg shadow m-4 dark:bg-gray-800">
    <div class="w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between">
      <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400">Copyright © 2023 , Dotify by <a href="https://github.com/nader-mk" class="hover:underline"><b>Nader Mahbub Khan</b></a>. All Rights Reserved.
    </span>
    <ul class="flex flex-wrap items-center mt-3 text-sm font-medium text-gray-500 dark:text-gray-400 sm:mt-0">
        <li>
            <a href="#" class="mr-4 hover:underline md:mr-6 ">About</a>
        </li>
        <li>
            <a href="#" class="mr-4 hover:underline md:mr-6">Privacy Policy</a>
        </li>
        <li>
            <a href="#" class="mr-4 hover:underline md:mr-6">Licensing</a>
        </li>
        <li>
            <a href="#" class="hover:underline">Contact</a>
        </li>
    </ul>
    </div>
</footer>

    </div>
 

  <script>
// Image to Base64 Conversion
var naderPr=document.getElementById("naderPr");
naderPr.style.display="none";
var imageInput = document.getElementById('imageInput');
var convertToBase64Btn = document.getElementById('convertToBase64Btn');
var dt=document.getElementById('dt');
var base64Output = document.getElementById('base64Output');
var selectedImage = document.getElementById('selectedImage');
var d64=document.getElementById('d64');
var warning=document.getElementById('wrn');
warning.style.display="none";
var copy64=document.getElementById('cpyBtn');
const range = document.getElementById('range');
//const rangeValue = document.getElementById('range-value');
const reductionLabel = document.getElementById('reduction-label');
let reduction=0.0;

range.addEventListener('input', () => {
 reduction = range.value;
  const sh=reduction* 100;
 warning.style.display="block";
 // rangeValue.textContent = range.value;
 
  reductionLabel.textContent = `${sh}% quality of original photo will be kept. Speed of generation dotified notations may vary on your device specifications.`;
});
copy64.addEventListener('click',function(){
  copyCode();
});
d64.addEventListener('click',function(){
  // Base64-encoded image data
const base64Image = Nader_Dotify.revert(base64Input.value);

// Create a new Image object
const image = new Image();

// When the image has loaded
image.onload = function() {
  // Create a new canvas element
  const canvas = document.createElement("canvas");
  canvas.width = image.width;
  canvas.height = image.height;
dt.innerHTML=canvas.height+"×"+canvas.width+"p";
  // Draw the image onto the canvas
  const ctx = canvas.getContext("2d");
  ctx.drawImage(image, 0, 0);

  // Get the image data as a JPEG
  const jpegData = canvas.toDataURL("image/jpeg");

  // Create a download link for the JPEG
  const downloadLink = document.createElement("a");
  downloadLink.href = jpegData;
  downloadLink.download = "image.jpg";
  document.body.appendChild(downloadLink);
  downloadLink.click();
  document.body.removeChild(downloadLink);
};

// Set the source of the image to the base64 data
image.src = base64Image;

});
imageInput.addEventListener('change', function(event) {
  var file = event.target.files[0];
  if (file) {
    selectedImage.innerText = file.name;
  }
});

convertToBase64Btn.addEventListener('click', function() {
  

  
  var file = imageInput.files[0];
  if (file) {
    var reader = new FileReader();
    reader.onloadend = function() {
      var img = document.createElement('img');
      img.onload = function() {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var width = img.width * reduction;
        var height = img.height * reduction;
        canvas.width = width;
        canvas.height = height;
        ctx.drawImage(img, 0, 0, width, height);
        var base64 = canvas.toDataURL('image/jpeg', reduction);
        var dotted=Nader_Dotify.process(base64);
        base64Input.innerText = dotted;
      };
      img.src = URL.createObjectURL(file);
    };
    reader.readAsDataURL(file);
  } else {
    base64Output.innerText = 'Please select an image file.';
  }
});

// Base64 to Image Conversion
var base64Input = document.getElementById('base64Input');
var convertToImageBtn = document.getElementById('convertToImageBtn');
var imageContainer = document.getElementById('imageContainer');

convertToImageBtn.addEventListener('click', function() {
  naderPr.style.display="block";
  var base64 = base64Input.value;
  if (base64) {
    var image = document.createElement('img');
    var normal64=Nader_Dotify.revert(base64);
    image.src = normal64;
    image.classList.add('output-image');
    imageContainer.innerHTML = '';
    imageContainer.appendChild(image);
  } else {
    imageContainer.innerHTML = 'Something went wromg.';
  }
});
function saveTextAsFile() {
  // Get the textarea element
  const textArea = document.getElementById("base64Input");

  // Get the text content of the textarea
  const textToSave = textArea.value;

  // Create a new Blob object with the text content
  const blob = new Blob([textToSave], { type: "text/dotify" });

  // Create a new anchor element to trigger the download
  const downloadLink = document.createElement("a");

  // Set the download attribute of the anchor element
  downloadLink.download = "dotified-image.dotify";

  // Set the href attribute of the anchor element to the URL of the Blob object
  downloadLink.href = window.URL.createObjectURL(blob);

  // Append the anchor element to the body
  document.body.appendChild(downloadLink);

  // Click the anchor element to trigger the download
  downloadLink.click();

  // Remove the anchor element from the body
  document.body.removeChild(downloadLink);
}

function copyCode() {
    const codeBlock = document.getElementById('base64Input');
    const code = codeBlock.textContent;
    navigator.clipboard.writeText(code)
      .then(() => {
        const copyButto = codeBlock.nextElementSibling;
        const copyButton=copyButto.nextElementSibling;
        copyButton.textContent = "Copied!";
        setTimeout(() => {
          copyButton.textContent = "Copy";
        }, 2000);
      })
      .catch((error) => {
        console.error('Failed to copy code: ', error);
      });
}

  </script>
</body>

</html>
